import{i as n,_ as w,d as c,o as E,c as N,b as l,w as a,a as b,e as u}from"./index-789cd201.js";import{E as k,a as v}from"./el-table-column-e16de002.js";import"./el-tag-4ea04386.js";import{E as C}from"./el-dialog-19ea18e4.js";import"./el-overlay-55eb4b45.js";import{E as U,a as F}from"./el-form-item-0fc3dfa5.js";import{E as L}from"./el-input-26b7f203.js";import{E as W}from"./el-button-cc310b46.js";/* empty css                   */import{E as $}from"./index-c9eff66b.js";import{E as m}from"./index-3bbe16be.js";import"./_Uint8Array-76672878.js";import"./_initCloneObject-f66fa92e.js";import"./debounce-c87c8148.js";import"./use-form-item-f09bf200.js";import"./validator-87c37b4d.js";const D=e=>n.request({url:"api/major/page",method:"post",data:e}),B=e=>n.request({url:"api/dormitory/add",method:"post",data:e}),q=e=>n.request({url:"api/dormitory/delete",method:"get",params:e}),T=e=>n.request({url:"api/dormitory/edit",method:"post",data:e}),z=e=>n.request({url:"api/dormitory/one",method:"get",params:e}),A=()=>n.request({url:"api/dormitory/all",method:"get"}),p={getPage:D,add:B,remove:q,update:T,select:z,entire:A},I=c({data(){return{list:[],dormitory:{},dialogFormVisible:!1}},mounted(){this.fetchData()},methods:{fetchData(){p.entire().then(e=>{console.log(e),this.list=e.data.dormitories})},handleDelete(e){const o={id:e};$.confirm("您是否需要删除该宿舍?","提示",{confirmButtonText:"ok",cancelButtonText:"no",type:"warning"}).then(()=>{p.remove(o).then(f=>{f.success?(m({type:"success",message:"删除成功"}),this.fetchData()):m({type:"error",message:"网络出问题，联系管理员"})})}).catch(()=>{m({type:"warning",message:"取消删除"})})},handleEdit(e){this.dialogFormVisible=!0;const o={id:e};p.select(o).then(f=>{this.dormitory=f.data.dormitory})},toAdd(){this.dormitory={},this.dialogFormVisible=!0},confirm(){this.dormitory.id==null?p.add(this.dormitory).then(e=>{e.success?(m({type:"success",message:"添加成功"}),this.fetchData()):m({type:"error",message:"网络出问题，联系管理员"}),this.dialogFormVisible=!1}):(p.update(this.dormitory).then(e=>{e.success?(m({type:"success",message:"编辑成功"}),this.fetchData()):m({type:"error",message:"网络出问题，联系管理员"})}),this.dialogFormVisible=!1)}}}),M={class:"root"},j={class:"dialog-footer"},P={class:"table"};function G(e,o,f,H,J,K){const s=W,i=L,d=U,h=F,y=C,r=v,g=k;return E(),N("div",M,[l(s,{type:"success",plain:"",onClick:e.toAdd},{default:a(()=>[u("新增")]),_:1},8,["onClick"]),l(y,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[12]||(o[12]=t=>e.dialogFormVisible=t),title:"宿舍表单"},{footer:a(()=>[b("span",j,[l(s,{onClick:o[10]||(o[10]=t=>e.dialogFormVisible=!1)},{default:a(()=>[u("取消")]),_:1}),l(s,{type:"primary",onClick:o[11]||(o[11]=t=>e.confirm())},{default:a(()=>[u(" 确定 ")]),_:1})])]),default:a(()=>[l(h,{model:e.dormitory},{default:a(()=>[l(d,{label:"宿舍名称","label-width":e.formLabelWidth},{default:a(()=>[l(i,{modelValue:e.dormitory.name,"onUpdate:modelValue":o[0]||(o[0]=t=>e.dormitory.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"宿舍长编号","label-width":e.formLabelWidth},{default:a(()=>[l(i,{modelValue:e.dormitory.leader,"onUpdate:modelValue":o[1]||(o[1]=t=>e.dormitory.leader=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"总床位数","label-width":e.formLabelWidth},{default:a(()=>[l(i,{modelValue:e.dormitory.maxNumber,"onUpdate:modelValue":o[2]||(o[2]=t=>e.dormitory.maxNumber=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"空位数","label-width":e.formLabelWidth},{default:a(()=>[l(i,{modelValue:e.dormitory.leftNumber,"onUpdate:modelValue":o[3]||(o[3]=t=>e.dormitory.leftNumber=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"入住人数","label-width":e.formLabelWidth},{default:a(()=>[l(i,{modelValue:e.dormitory.liveNumber,"onUpdate:modelValue":o[4]||(o[4]=t=>e.dormitory.liveNumber=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"宿舍状态","label-width":e.formLabelWidth},{default:a(()=>[l(i,{modelValue:e.dormitory.status,"onUpdate:modelValue":o[5]||(o[5]=t=>e.dormitory.status=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"宿舍备注","label-width":e.formLabelWidth},{default:a(()=>[l(i,{modelValue:e.dormitory.comment,"onUpdate:modelValue":o[6]||(o[6]=t=>e.dormitory.comment=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"学校","label-width":e.formLabelWidth},{default:a(()=>[l(i,{modelValue:e.dormitory.school,"onUpdate:modelValue":o[7]||(o[7]=t=>e.dormitory.school=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"宿舍类型","label-width":e.formLabelWidth},{default:a(()=>[l(i,{modelValue:e.dormitory.type,"onUpdate:modelValue":o[8]||(o[8]=t=>e.dormitory.type=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"建筑","label-width":e.formLabelWidth},{default:a(()=>[l(i,{modelValue:e.dormitory.building,"onUpdate:modelValue":o[9]||(o[9]=t=>e.dormitory.building=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),b("div",P,[l(g,{data:e.list,style:{width:"100%"}},{default:a(()=>[l(r,{fixed:"",prop:"id",label:"id",width:"80",align:"center"}),l(r,{prop:"name",label:"宿舍名称",width:"80",align:"center"}),l(r,{prop:"leader",label:"宿舍长编号",width:"100",align:"center"}),l(r,{prop:"maxNumber",label:"总床位数",width:"100",align:"center"}),l(r,{prop:"leftNumber",label:"空位数",width:"100",align:"center"}),l(r,{prop:"liveNumber",label:"入住人数",width:"100",align:"center"}),l(r,{prop:"status",label:"宿舍状态",width:"100",align:"center"}),l(r,{prop:"comment",label:"宿舍备注",width:"300",align:"center"}),l(r,{prop:"school",label:"学校",width:"180",align:"center"}),l(r,{prop:"type",label:"宿舍类型",width:"80",align:"center"}),l(r,{prop:"building",label:"建筑",width:"80",align:"center"}),l(r,{fixed:"right",label:"权限",width:"150",align:"center"},{default:a(t=>[l(s,{type:"info",plain:"",size:"small",onClick:V=>e.handleEdit(t.row.id)},{default:a(()=>[u("编辑")]),_:2},1032,["onClick"]),l(s,{type:"danger",plain:"",size:"small",onClick:V=>e.handleDelete(t.row.id)},{default:a(()=>[u("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])])}const de=w(I,[["render",G]]);export{de as default};
