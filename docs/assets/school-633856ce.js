import{_ as y,d as C,o as E,c as z,a as h,b as l,w as t,e as m}from"./index-789cd201.js";import{E as v}from"./el-pagination-d72db8aa.js";import{E as D}from"./el-input-26b7f203.js";import"./el-tag-4ea04386.js";import"./el-select-bd4a6b65.js";import{E as k,a as T}from"./el-table-column-e16de002.js";import{E as F}from"./el-dialog-19ea18e4.js";import"./el-overlay-55eb4b45.js";import{E as U,a as L}from"./el-form-item-0fc3dfa5.js";import{E as W}from"./el-button-cc310b46.js";import{s as p}from"./school-bbc040a4.js";import{d as f}from"./dayjs.min-4904ffcd.js";/* empty css                   */import{E as $}from"./index-c9eff66b.js";import{E as d}from"./index-3bbe16be.js";import"./use-form-item-f09bf200.js";import"./_Uint8Array-76672878.js";import"./debounce-c87c8148.js";import"./validator-87c37b4d.js";import"./_initCloneObject-f66fa92e.js";const Y=C({data(){return{list:[],school:{},dialogFormVisible:!1,pagesize:10,currentPage:1}},mounted(){this.fetchData()},methods:{handleCurrentChange(e){this.currentPage=e},handleSizeChange(e){this.pagesize=e},fetchData(){p.all().then(e=>{console.log(e),this.list=e.data.schools,this.list.forEach(o=>{o.createTime=f(o.createTime).format("YYYY年MM月DD日 HH:mm:ss"),o.updateTime=f(o.updateTime).format("YYYY年MM月DD日 HH:mm:ss"),o.enable==0?o.enable="未启用":o.enable="启用"})})},handleDelete(e){const o={id:e};$.confirm("您是否确定删除该学校?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{p.remove(o).then(u=>{u.success?(d({type:"success",message:"删除成功"}),this.fetchData()):d({type:"error",message:"网络出问题，联系管理员"})})}).catch(()=>{d({type:"warning",message:"取消删除"})})},handleEdit(e){this.dialogFormVisible=!0;const o=e;p.one(o).then(u=>{this.school=u.data.school})},toAdd(){this.school={},this.dialogFormVisible=!0},confirm(){console.log(this.school),this.school.id==null?p.add(this.school).then(e=>{e.success?(d({type:"success",message:"添加成功"}),this.fetchData()):d({type:"error",message:"网络出问题，联系管理员"}),this.dialogFormVisible=!1}):(p.update(this.school).then(e=>{e.success?(d({type:"success",message:"编辑成功"}),this.fetchData()):d({type:"error",message:"网络出问题，联系管理员"})}),this.dialogFormVisible=!1)}}}),B={class:"root"},M=h("div",{style:{"margin-left":"30px","margin-top":"30px","font-size":"20px"}},"学校管理",-1),N={class:"competition-tools",style:{"margin-left":"89%","margin-bottom":"10px"}},P={class:"dialog-footer"},H={class:"table"};function S(e,o,u,j,A,I){const r=W,s=D,n=U,b=L,g=F,i=T,c=k,V=v;return E(),z("div",B,[M,h("div",N,[l(r,{type:"success",color:"",onClick:e.toAdd,style:{width:"80px"}},{default:t(()=>[m("添加")]),_:1},8,["onClick"])]),l(g,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[11]||(o[11]=a=>e.dialogFormVisible=a),title:"学校表单"},{footer:t(()=>[h("span",P,[l(r,{onClick:o[9]||(o[9]=a=>e.dialogFormVisible=!1)},{default:t(()=>[m("取消")]),_:1}),l(r,{type:"primary",onClick:o[10]||(o[10]=a=>(e.school.enable=0,e.confirm()))},{default:t(()=>[m(" 确定 ")]),_:1})])]),default:t(()=>[l(b,{model:e.school},{default:t(()=>[l(n,{label:"省份","label-width":e.formLabelWidth},{default:t(()=>[l(s,{modelValue:e.school.province,"onUpdate:modelValue":o[0]||(o[0]=a=>e.school.province=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"城市","label-width":e.formLabelWidth},{default:t(()=>[l(s,{modelValue:e.school.city,"onUpdate:modelValue":o[1]||(o[1]=a=>e.school.city=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"市|县","label-width":e.formLabelWidth},{default:t(()=>[l(s,{modelValue:e.school.area,"onUpdate:modelValue":o[2]||(o[2]=a=>e.school.area=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"学校名称","label-width":e.formLabelWidth},{default:t(()=>[l(s,{modelValue:e.school.schoolName,"onUpdate:modelValue":o[3]||(o[3]=a=>e.school.schoolName=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"纬度","label-width":e.formLabelWidth},{default:t(()=>[l(s,{modelValue:e.school.latitude,"onUpdate:modelValue":o[4]||(o[4]=a=>e.school.latitude=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"经度","label-width":e.formLabelWidth},{default:t(()=>[l(s,{modelValue:e.school.longitude,"onUpdate:modelValue":o[5]||(o[5]=a=>e.school.longitude=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"是否启用","label-width":e.formLabelWidth},{default:t(()=>[l(s,{modelValue:e.school.enable,"onUpdate:modelValue":o[6]||(o[6]=a=>e.school.enable=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"学校说明","label-width":e.formLabelWidth},{default:t(()=>[l(s,{modelValue:e.school.description,"onUpdate:modelValue":o[7]||(o[7]=a=>e.school.description=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"地址","label-width":e.formLabelWidth},{default:t(()=>[l(s,{modelValue:e.school.address,"onUpdate:modelValue":o[8]||(o[8]=a=>e.school.address=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),h("div",H,[l(c,{data:e.list.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),border:"",style:{width:"100%","margin-left":"20px"}},{default:t(()=>[l(i,{fixed:"",prop:"id",label:"id",width:"60",align:"center"}),l(i,{prop:"province",label:"省份",width:"70",align:"center"}),l(i,{prop:"city",label:"城市",width:"70",align:"center"}),l(i,{prop:"area",label:"市|县",width:"70",align:"center"}),l(i,{prop:"schoolName",label:"学校名称",width:"120",align:"center"}),l(i,{prop:"latitude",label:"纬度",width:"80",align:"center"}),l(i,{prop:"longitude",label:"经度",width:"80",align:"center"}),l(i,{prop:"enable",label:"是否启用",width:"80",align:"center"}),l(i,{prop:"description",label:"学校说明",width:"80",align:"center"}),l(i,{prop:"address",label:"地址",width:"110",align:"center"}),l(i,{prop:"createTime",label:"创建时间",width:"85",align:"center"}),l(i,{prop:"updateTime",label:"修改时间",width:"85",align:"center"}),l(i,{label:"权限",width:"160",align:"center",fixed:"right"},{default:t(a=>[l(r,{type:"primary",onClick:w=>e.handleEdit(a.row.id)},{default:t(()=>[m("编辑")]),_:2},1032,["onClick"]),l(r,{type:"danger",onClick:w=>e.handleDelete(a.row.id)},{default:t(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(V,{background:"",layout:"prev, pager, next, sizes, total, jumper","page-sizes":[5,10,15,20],"page-size":e.pagesize,total:e.list.length,onCurrentChange:e.handleCurrentChange,onSizeChange:e.handleSizeChange},null,8,["page-size","total","onCurrentChange","onSizeChange"])])])}const re=y(Y,[["render",S]]);export{re as default};
