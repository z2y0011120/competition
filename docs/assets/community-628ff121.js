import{i as f,_ as w,d as E,o as C,c as B,b as l,w as a,a as b,e as r}from"./index-789cd201.js";import{E as U}from"./el-dialog-19ea18e4.js";import"./el-overlay-55eb4b45.js";import{E as L,a as W}from"./el-form-item-0fc3dfa5.js";import{E as v}from"./el-input-26b7f203.js";import{E as D}from"./el-pagination-d72db8aa.js";import"./el-tag-4ea04386.js";import"./el-select-bd4a6b65.js";import{E as z,a as I}from"./el-table-column-e16de002.js";import{E as k}from"./el-button-cc310b46.js";/* empty css                   */import{E as F}from"./index-c9eff66b.js";import{E as u}from"./index-3bbe16be.js";import"./use-form-item-f09bf200.js";import"./_Uint8Array-76672878.js";import"./_initCloneObject-f66fa92e.js";import"./debounce-c87c8148.js";import"./validator-87c37b4d.js";const $=e=>f.request({url:"api/community/page",method:"post",data:e}),q=e=>f.request({url:"api/community/delete",method:"get",params:e}),T=e=>f.request({url:"api/community/edit",method:"post",data:e}),S=e=>f.request({url:"api/community/one",method:"get",params:e}),N=e=>f.request({url:"api/community/add",method:"post",data:e}),p={getcommunityByPage:$,deleteById:q,updateById:T,queryById:S,addOne:N};const P=E({data(){return{tableData:[],page:1,total:0,limit:10,community:{},dialogFormVisible:!1}},methods:{fetchData(){const e={current:this.page,size:this.limit};p.getcommunityByPage(e).then(t=>{const d=t.data.page;this.tableData=d.records,this.total=d.total})},handleEdit(e){this.dialogFormVisible=!0;const t={id:e};p.queryById(t).then(d=>{this.community=d.data.community})},handleDelete(e){const t={id:e};F.confirm("你确定删除该行数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{p.deleteById(t).then(d=>{d.success?(u({type:"success",message:"删除成功"}),this.fetchData()):u({type:"error",message:"删除失败"})})}).catch(()=>{u({type:"warning",message:"取消删除"})})},toAdd(){this.dialogFormVisible=!0},excute(){this.community.id==null?(console.log(this.community),p.addOne(this.community).then(e=>{console.log(e),e.success?(u({type:"success",message:"添加成功"}),this.fetchData()):u({type:"error",message:"添加失败"}),this.dialogFormVisible=!1})):(p.updateById(this.community).then(e=>{e.success?(u({type:"success",message:"编辑成功"}),this.fetchData()):u({type:"error",message:"编辑失败"})}),this.dialogFormVisible=!1)},changeSize(e){this.limit=e,this.fetchData()}},created(){this.fetchData(1)}}),A={class:""},M={class:"table"},O={class:"dialog-footer"};function j(e,t,d,G,H,J){const s=k,i=I,h=z,g=D,m=v,n=L,y=W,c=U;return C(),B("div",A,[l(s,{type:"success",size:"small",onClick:e.toAdd},{default:a(()=>[r("添加")]),_:1},8,["onClick"]),b("div",M,[l(h,{data:e.tableData,style:{width:"100%"}},{default:a(()=>[l(i,{fixed:"",prop:"id",label:"编号",width:"150",align:"center"}),l(i,{prop:"name",label:"社团名称",width:"120",align:"center"}),l(i,{prop:"type",label:"类型",width:"120",align:"center"}),l(i,{prop:"teachers",label:"指导老师",width:"120",align:"center"}),l(i,{prop:"depart",label:"学院编号",width:"120",align:"center"}),l(i,{prop:"logo",label:"团社logo",width:"120",align:"center"}),l(i,{prop:"charger",label:"团社会长",width:"120",align:"center"}),l(i,{prop:"description",label:"团社介绍",width:"120",align:"center"}),l(i,{prop:"status",label:"状态",width:"120",align:"center"}),l(i,{prop:"address",label:"团社地址",width:"120",align:"center"}),l(i,{prop:"mobile",label:"团社电话",width:"120",align:"center"}),l(i,{prop:"email",label:"团社邮箱",width:"120",align:"center"}),l(i,{prop:"weixin",label:"团社公众号",width:"120",align:"center"}),l(i,{prop:"school_id",label:"学校",width:"120",align:"center"}),l(i,{prop:"create_time",label:"创建时间",width:"120",align:"center"}),l(i,{prop:"update_time",label:"更新时间",width:"120",align:"center"}),l(i,{fixed:"right",label:"操作",width:"180",align:"center"},{default:a(o=>[l(s,{size:"small",onClick:V=>e.handleEdit(o.row.id)},{default:a(()=>[r("编辑")]),_:2},1032,["onClick"]),l(s,{size:"small",type:"danger",onClick:V=>e.handleDelete(o.row.id)},{default:a(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),l(g,{"current-page":e.page,total:e.total,"page-size":e.limit,"page-sizes":[5,10,20,30,40,50,100],style:{padding:"30px 0","text-align":"center"},layout:"sizes, prev, pager, next, jumper, ->, total, slot",onCurrentChange:e.fetchData,onSizeChange:e.changeSize},null,8,["current-page","total","page-size","onCurrentChange","onSizeChange"]),l(c,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[16]||(t[16]=o=>e.dialogFormVisible=o),title:"添加/编辑"},{footer:a(()=>[b("span",O,[l(s,{onClick:t[14]||(t[14]=o=>e.dialogFormVisible=!1)},{default:a(()=>[r("取消")]),_:1}),l(s,{type:"primary",onClick:t[15]||(t[15]=o=>e.excute())},{default:a(()=>[r(" 确定 ")]),_:1})])]),default:a(()=>[l(y,{model:e.community},{default:a(()=>[l(n,{label:"社团名称","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.name,"onUpdate:modelValue":t[0]||(t[0]=o=>e.community.name=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"社团类型","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.type,"onUpdate:modelValue":t[1]||(t[1]=o=>e.community.type=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"指导老师","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.teachers,"onUpdate:modelValue":t[2]||(t[2]=o=>e.community.teachers=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"学院编号","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.depart,"onUpdate:modelValue":t[3]||(t[3]=o=>e.community.depart=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"团社logo","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.logo,"onUpdate:modelValue":t[4]||(t[4]=o=>e.community.logo=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"团社会长","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.charger,"onUpdate:modelValue":t[5]||(t[5]=o=>e.community.charger=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"团社介绍","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.description,"onUpdate:modelValue":t[6]||(t[6]=o=>e.community.description=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"状态","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.status,"onUpdate:modelValue":t[7]||(t[7]=o=>e.community.status=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"团社地址","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.address,"onUpdate:modelValue":t[8]||(t[8]=o=>e.community.address=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"团社电话","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.mobile,"onUpdate:modelValue":t[9]||(t[9]=o=>e.community.mobile=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"团社邮箱","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.email,"onUpdate:modelValue":t[10]||(t[10]=o=>e.community.email=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"团社公众号","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.weixin,"onUpdate:modelValue":t[11]||(t[11]=o=>e.community.weixin=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"学校","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.schoolId,"onUpdate:modelValue":t[12]||(t[12]=o=>e.community.schoolId=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"版本","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.version,"onUpdate:modelValue":t[13]||(t[13]=o=>e.community.version=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])])}const se=w(P,[["render",j],["__scopeId","data-v-a5c83346"]]);export{se as default};
