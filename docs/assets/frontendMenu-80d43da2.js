import{i as p,_ as w,d as M,o as y,c as E,b as t,w as n,a as h,e as u}from"./index-789cd201.js";import{E as _}from"./el-dialog-19ea18e4.js";import"./el-overlay-55eb4b45.js";import{E as C,a as B}from"./el-form-item-0fc3dfa5.js";import{E as D}from"./el-input-26b7f203.js";import{E as I,a as k}from"./el-table-column-e16de002.js";import"./el-tag-4ea04386.js";import{E as F}from"./el-button-cc310b46.js";/* empty css                   */import{E as U}from"./index-c9eff66b.js";import{E as d}from"./index-3bbe16be.js";import"./use-form-item-f09bf200.js";import"./_Uint8Array-76672878.js";import"./_initCloneObject-f66fa92e.js";import"./debounce-c87c8148.js";import"./validator-87c37b4d.js";const v=e=>p.request({url:"api/menu/add",method:"post",data:e}),$=e=>p.request({url:"api/menu/delete",method:"get",params:e}),L=e=>p.request({url:"api/menu/one",method:"get",params:e}),q=e=>p.request({url:"api/menu/all",method:"get",params:e}),T=e=>p.request({url:"api/menu/edit",method:"post",data:e}),m={all:q,deleteById:$,updateById:T,queryById:L,add:v};const N=M({data(){return{formData:[],frontendMenu:{},dialogFormVisible:!1}},methods:{initData(){m.all().then(e=>{this.formData=e.data.communities})},handleDelete(e){const l={id:e};U.confirm("你确定删除该行数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{m.deleteById(l).then(f=>{f.success?(d({type:"success",message:"删除成功"}),this.initData()):d({type:"error",message:"删除失败"})})}).catch(()=>{d({type:"warning",message:"取消删除"})})},handleEdit(e){this.dialogFormVisible=!0;const l={id:e};m.queryById(l).then(f=>{this.frontendMenu=f.data.frontendMenu})},toAdd(){this.dialogFormVisible=!0,this.frontendMenu={}},excute(){this.frontendMenu.id!=null?(m.updateById(this.frontendMenu).then(e=>{e.success?(d({type:"success",message:"编辑成功"}),this.initData()):d({type:"error",message:"编辑失败"})}),this.dialogFormVisible=!1):m.add(this.frontendMenu).then(e=>{e.success?(d({type:"success",message:"编辑成功"}),this.initData()):d({type:"error",message:"添加失败"}),this.dialogFormVisible=!1})}},mounted(){this.initData(1)}}),W={class:""},z={class:"table"},S={class:"dialog-footer"};function A(e,l,f,H,j,G){const s=F,a=k,b=I,i=D,r=C,g=B,c=_;return y(),E("div",W,[t(s,{type:"success",size:"small",onClick:e.toAdd},{default:n(()=>[u("添加")]),_:1},8,["onClick"]),h("div",z,[t(b,{data:e.formData,style:{width:"100%"}},{default:n(()=>[t(a,{fixed:"",prop:"id",label:"编号",width:"150",align:"center"}),t(a,{prop:"menuName",label:"前端菜单名称'",width:"120",align:"center"}),t(a,{prop:"menuUrl",label:"前端菜单访问HTML地址",width:"200",align:"center"}),t(a,{prop:"pid",label:"父ID",width:"120",align:"center"}),t(a,{prop:"menuSort",label:"排序",width:"120",align:"center"}),t(a,{prop:"description",label:"描述",width:"120",align:"center"}),t(a,{prop:"hasChildren",label:"是否有子菜单",width:"120",align:"center"}),t(a,{fixed:"right",label:"操作",width:"180",align:"center"},{default:n(o=>[t(s,{size:"small",onClick:V=>e.handleEdit(o.row.id)},{default:n(()=>[u("编辑")]),_:2},1032,["onClick"]),t(s,{size:"small",type:"danger",onClick:V=>e.handleDelete(o.row.id)},{default:n(()=>[u("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),t(c,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":l[8]||(l[8]=o=>e.dialogFormVisible=o),title:"添加/编辑"},{footer:n(()=>[h("span",S,[t(s,{onClick:l[6]||(l[6]=o=>e.dialogFormVisible=!1)},{default:n(()=>[u("取消")]),_:1}),t(s,{type:"primary",onClick:l[7]||(l[7]=o=>e.excute())},{default:n(()=>[u(" 确定 ")]),_:1})])]),default:n(()=>[t(g,{model:e.frontendMenu},{default:n(()=>[t(r,{label:"前端菜单名称","label-width":e.formLabelWidth},{default:n(()=>[t(i,{modelValue:e.frontendMenu.menuName,"onUpdate:modelValue":l[0]||(l[0]=o=>e.frontendMenu.menuName=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(r,{label:"前端菜单访问HTML地址","label-width":e.formLabelWidth},{default:n(()=>[t(i,{modelValue:e.frontendMenu.menuUrl,"onUpdate:modelValue":l[1]||(l[1]=o=>e.frontendMenu.menuUrl=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(r,{label:"父ID","label-width":e.formLabelWidth},{default:n(()=>[t(i,{modelValue:e.frontendMenu.pid,"onUpdate:modelValue":l[2]||(l[2]=o=>e.frontendMenu.pid=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(r,{label:"排序","label-width":e.formLabelWidth},{default:n(()=>[t(i,{modelValue:e.frontendMenu.menuSort,"onUpdate:modelValue":l[3]||(l[3]=o=>e.frontendMenu.menuSort=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(r,{label:"描述","label-width":e.formLabelWidth},{default:n(()=>[t(i,{modelValue:e.frontendMenu.description,"onUpdate:modelValue":l[4]||(l[4]=o=>e.frontendMenu.description=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(r,{label:"是否有子菜单","label-width":e.formLabelWidth},{default:n(()=>[t(i,{modelValue:e.frontendMenu.hasChildren,"onUpdate:modelValue":l[5]||(l[5]=o=>e.frontendMenu.hasChildren=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])])}const de=w(N,[["render",A],["__scopeId","data-v-7c43a780"]]);export{de as default};
