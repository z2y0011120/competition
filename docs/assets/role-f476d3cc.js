import{i as n,_ as w,d as C,o as _,c as y,b as t,w as l,a as h,e as m}from"./index-789cd201.js";import{E as z}from"./el-pagination-d72db8aa.js";import{E as k}from"./el-input-26b7f203.js";import"./el-tag-4ea04386.js";import"./el-select-bd4a6b65.js";import{E as D,a as F}from"./el-table-column-e16de002.js";import{E as v}from"./el-dialog-19ea18e4.js";import"./el-overlay-55eb4b45.js";import{E as $,a as B}from"./el-form-item-0fc3dfa5.js";import{E as q}from"./el-button-cc310b46.js";/* empty css                   */import{E as T}from"./index-c9eff66b.js";import{E as r}from"./index-3bbe16be.js";import"./use-form-item-f09bf200.js";import"./_Uint8Array-76672878.js";import"./debounce-c87c8148.js";import"./validator-87c37b4d.js";import"./_initCloneObject-f66fa92e.js";const N=e=>n.request({url:"api/role/page",method:"post",data:e}),S=e=>n.request({url:"api/role/one",method:"get",params:e}),U=e=>n.request({url:"api/role/delete",method:"get",params:e}),L=e=>n.request({url:"api/role/add",method:"post",data:e}),P=e=>n.request({url:"api/role/edit",method:"post",data:e}),W=()=>n.request({url:"api/role/all",method:"get"}),A=e=>n.request({url:"api/role/colums",method:"get",params:e}),p={insert:L,remove:U,update:P,one:S,getPage:N,getRolesByColums:A,all:W},I=C({data(){return{list:[],role:{},current:1,size:10,total:0,dialogFormVisible:!1}},mounted(){this.fetchData(1)},methods:{fetchData(e){this.current=e;const o={current:this.current,size:this.size};p.getPage(o).then(s=>{console.log(s),this.list=s.data.page.records,this.total=s.data.page.total})},handleDelete(e){const o={id:e};T.confirm("您是否需要删除该角色?","提示",{confirmButtonText:"ok",cancelButtonText:"no",type:"warning"}).then(()=>{p.remove(o).then(s=>{s.success?(r({type:"success",message:"删除成功"}),this.fetchData(1)):r({type:"error",message:"网络出问题，联系管理员"})})}).catch(()=>{r({type:"warning",message:"取消删除"})})},handleEdit(e){this.dialogFormVisible=!0;const o={id:e};p.one(o).then(s=>{this.role=s.data.role})},toAdd(){this.role={},this.dialogFormVisible=!0},confirm(){this.role.id==null?(console.log(this.role),p.insert(this.role).then(e=>{console.log(e),e.success?(r({type:"success",message:"添加成功"}),this.fetchData(1)):r({type:"error",message:"网络出问题，联系管理员"}),this.dialogFormVisible=!1})):(p.update(this.role).then(e=>{e.success?(r({type:"success",message:"编辑成功"}),this.fetchData(1)):r({type:"error",message:"网络出问题，联系管理员"})}),this.dialogFormVisible=!1)},changeSize(e){this.size=e,this.fetchData(1)}}}),M={class:"root"},j={class:"dialog-footer"},R={class:"table"};function G(e,o,s,H,J,K){const d=q,u=k,c=$,f=B,g=v,i=F,b=D,V=z;return _(),y("div",M,[t(d,{type:"success",plain:"",onClick:e.toAdd},{default:l(()=>[m("新增")]),_:1},8,["onClick"]),t(g,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[5]||(o[5]=a=>e.dialogFormVisible=a),title:"角色表单"},{footer:l(()=>[h("span",j,[t(d,{onClick:o[3]||(o[3]=a=>e.dialogFormVisible=!1)},{default:l(()=>[m("取消")]),_:1}),t(d,{type:"primary",onClick:o[4]||(o[4]=a=>e.confirm())},{default:l(()=>[m(" 确定 ")]),_:1})])]),default:l(()=>[t(f,{model:e.role},{default:l(()=>[t(c,{label:"角色名称","label-width":e.formLabelWidth},{default:l(()=>[t(u,{modelValue:e.role.roleName,"onUpdate:modelValue":o[0]||(o[0]=a=>e.role.roleName=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(c,{label:"描述","label-width":e.formLabelWidth},{default:l(()=>[t(u,{modelValue:e.role.description,"onUpdate:modelValue":o[1]||(o[1]=a=>e.role.description=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(c,{label:"状态","label-width":e.formLabelWidth},{default:l(()=>[t(u,{modelValue:e.role.status,"onUpdate:modelValue":o[2]||(o[2]=a=>e.role.status=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),h("div",R,[t(b,{data:e.list,style:{width:"100%"}},{default:l(()=>[t(i,{fixed:"",prop:"id",label:"序号",width:"80",align:"center"}),t(i,{prop:"roleName",label:"角色名称",width:"250",align:"center"}),t(i,{prop:"description",label:"描述",width:"100",align:"center"}),t(i,{prop:"status",label:"状态",width:"100",align:"center"}),t(i,{prop:"createTime",label:"创建时间",width:"250",align:"center"}),t(i,{prop:"updateTime",label:"更新时间",width:"100",align:"center"}),t(i,{fixed:"right",label:"权限",width:"150",align:"center"},{default:l(a=>[t(d,{type:"info",plain:"",size:"small",onClick:E=>e.handleEdit(a.row.id)},{default:l(()=>[m("编辑")]),_:2},1032,["onClick"]),t(d,{type:"danger",plain:"",size:"small",onClick:E=>e.handleDelete(a.row.id)},{default:l(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),t(V,{"current-page":e.page,total:e.total,"page-size":e.limit,"page-sizes":[5,10,20,30,40,50,100],style:{padding:"30px 0","text-align":"center"},layout:"sizes, prev, pager, next, jumper, ->, total, slot",onCurrentChange:e.fetchData,onSizeChange:e.changeSize},null,8,["current-page","total","page-size","onCurrentChange","onSizeChange"])])}const ue=w(I,[["render",G]]);export{ue as default};
