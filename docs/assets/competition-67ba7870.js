import{_ as w,d as C,o as z,c as E,a as u,b as o,w as a,F as y,e as p}from"./index-789cd201.js";import{E as v}from"./el-dialog-19ea18e4.js";import"./el-overlay-55eb4b45.js";import{E as k,a as F}from"./el-form-item-0fc3dfa5.js";import{E as P}from"./el-input-26b7f203.js";import{E as L}from"./el-pagination-d72db8aa.js";import"./el-tag-4ea04386.js";import"./el-select-bd4a6b65.js";import{E as U,a as W}from"./el-table-column-e16de002.js";import{E as $}from"./el-button-cc310b46.js";import{a as B,d as I,b as S,e as N}from"./competition-aa1427c3.js";import{c as T}from"./cloneDeep-03746fa9.js";import{E as m}from"./index-3bbe16be.js";import"./use-form-item-f09bf200.js";import"./_Uint8Array-76672878.js";import"./_initCloneObject-f66fa92e.js";import"./debounce-c87c8148.js";import"./validator-87c37b4d.js";const _=C({data(){return{pagesize:10,currentPage:1,competitions:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,competition:{id:0,name:"",start:"",end:"",homePage:"",schoolId:1,level:"",type:"",organizer:""},formLabelWidth:80}},mounted(){this.getall(1)},methods:{handleCurrentChange(e){this.currentPage=e},handleSizeChange(e){this.pagesize=e},toEdit(e){console.log(e),this.dialogFormVisible=!0,this.competition=T(e)},getall(e){B({current:e,size:2}).then(i=>{console.log(i);const g=i.data.competitions;this.competitions=g,this.page=g}).catch(i=>{console.log(i)})},currentchange(e){this.getall(e),this.page.current=e},del(e){console.log(e),I({id:e}).then(i=>{if(i.success)this.getall(this.page.current);else return console.log(i.msg),!1}).catch(i=>{})},toAdd(){this.dialogFormVisible=!0,this.competition={id:0,name:"",start:"",end:"",homePage:"",schoolId:1,type:"",level:"",organizer:""}},save(){console.log(this.competition);const e=this.competition;e.id==0?S(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getall(this.page.current),m(l.msg);else return m(l.msg),!1}).catch(l=>{m("网络错误联系管理员")}):N(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getall(this.page.current),m(l.msg);else return m(l.msg),!1}).catch(l=>{m("网络错误联系管理员")})}}}),A={class:"competitions"},D=u("div",{style:{"margin-left":"30px","margin-top":"30px","font-size":"20px"}},"目标赛事管理",-1),j={class:"competition-tools",style:{"margin-left":"89%","margin-bottom":"10px"}},M={class:"dialog-footer"};function q(e,l,i,g,G,H){const d=$,n=W,f=U,h=L,s=P,r=k,c=F,b=v;return z(),E(y,null,[u("div",A,[D,u("div",j,[o(d,{type:"success",color:"",onClick:e.toAdd,style:{width:"80px"}},{default:a(()=>[p("添加")]),_:1},8,["onClick"])]),o(f,{data:e.competitions.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),border:"",style:{width:"100%","margin-left":"20px"}},{default:a(()=>[o(n,{fixed:"",prop:"id",label:"id",width:"60",align:"center"}),o(n,{prop:"name",label:"竞赛名称",width:"170",align:"center"}),o(n,{prop:"start",label:"开始时间",width:"80",align:"center"}),o(n,{prop:"end",label:"结束时间",width:"80",align:"center"}),o(n,{prop:"homePage",label:"竞赛官网",width:"220",align:"center"}),o(n,{prop:"type",label:"竞赛类型",width:"80",align:"center"}),o(n,{prop:"level",label:"竞赛等级",width:"80",align:"center"}),o(n,{prop:"organizer",label:"组织部门",width:"220",align:"center"}),o(n,{fixed:"right",label:"操作",width:"160"},{default:a(t=>[o(d,{type:"primary",onClick:V=>e.toEdit(t.row)},{default:a(()=>[p("更新")]),_:2},1032,["onClick"]),o(d,{type:"danger",onClick:V=>e.del(t.row.id)},{default:a(()=>[p("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(h,{background:"",layout:"prev, pager, next, sizes, total, jumper","page-sizes":[5,10,15,20],"page-size":e.pagesize,total:e.competitions.length,onCurrentChange:e.handleCurrentChange,onSizeChange:e.handleSizeChange},null,8,["page-size","total","onCurrentChange","onSizeChange"])]),o(b,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":l[8]||(l[8]=t=>e.dialogFormVisible=t),title:"竞赛"},{footer:a(()=>[u("span",M,[o(d,{onClick:l[7]||(l[7]=t=>e.dialogFormVisible=!1)},{default:a(()=>[p("Cancel")]),_:1}),o(d,{type:"primary",onClick:e.save},{default:a(()=>[p(" 保存 ")]),_:1},8,["onClick"])])]),default:a(()=>[o(c,{model:e.competition},{default:a(()=>[o(r,{label:"竞赛名称","label-width":e.formLabelWidth},{default:a(()=>[o(s,{modelValue:e.competition.name,"onUpdate:modelValue":l[0]||(l[0]=t=>e.competition.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(r,{label:"开始时间","label-width":e.formLabelWidth},{default:a(()=>[o(s,{modelValue:e.competition.start,"onUpdate:modelValue":l[1]||(l[1]=t=>e.competition.start=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(r,{label:"结束时间","label-width":e.formLabelWidth},{default:a(()=>[o(s,{modelValue:e.competition.end,"onUpdate:modelValue":l[2]||(l[2]=t=>e.competition.end=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(r,{label:"竞赛官网","label-width":e.formLabelWidth},{default:a(()=>[o(s,{modelValue:e.competition.homePage,"onUpdate:modelValue":l[3]||(l[3]=t=>e.competition.homePage=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(r,{label:"竞赛类型","label-width":e.formLabelWidth},{default:a(()=>[o(s,{modelValue:e.competition.type,"onUpdate:modelValue":l[4]||(l[4]=t=>e.competition.type=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(r,{label:"竞赛等级","label-width":e.formLabelWidth},{default:a(()=>[o(s,{modelValue:e.competition.level,"onUpdate:modelValue":l[5]||(l[5]=t=>e.competition.level=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(r,{label:"组织者","label-width":e.formLabelWidth},{default:a(()=>[o(s,{modelValue:e.competition.organizer,"onUpdate:modelValue":l[6]||(l[6]=t=>e.competition.organizer=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const me=w(_,[["render",q]]);export{me as default};
