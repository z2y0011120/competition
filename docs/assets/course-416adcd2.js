import{i as f,_ as E,d as C,o as B,c as D,b as l,w as a,a as h,e as m}from"./index-789cd201.js";import{E as z}from"./el-dialog-19ea18e4.js";import"./el-overlay-55eb4b45.js";import{E as v,a as k}from"./el-form-item-0fc3dfa5.js";import{E as F}from"./el-input-26b7f203.js";import{E as I}from"./el-pagination-d72db8aa.js";import"./el-tag-4ea04386.js";import"./el-select-bd4a6b65.js";import{E as T,a as U}from"./el-table-column-e16de002.js";import{E as L}from"./el-button-cc310b46.js";/* empty css                   */import{E as W}from"./index-c9eff66b.js";import{E as d}from"./index-3bbe16be.js";import"./use-form-item-f09bf200.js";import"./_Uint8Array-76672878.js";import"./_initCloneObject-f66fa92e.js";import"./debounce-c87c8148.js";import"./validator-87c37b4d.js";const $=e=>f.request({url:"api/course/add",method:"post",data:e}),q=e=>f.request({url:"api/course/delete",method:"get",params:e}),N=e=>f.request({url:"api/course/one",method:"get",params:e}),_=e=>f.request({url:"api/course/page",method:"post",data:e}),j=e=>f.request({url:"api/course/edit",method:"post",data:e}),p={getcourseByPage:_,deleteById:q,updateById:j,queryById:N,addOne:$};const S=C({data(){return{tableData:[],page:1,total:0,limit:10,course:{},dialogFormVisible:!1}},methods:{fetchData(e){console.log(e),this.page=e;const o={current:this.page,size:this.limit};p.getcourseByPage(o).then(n=>{const c=n.data.page;this.tableData=c.records,this.total=c.total})},handleDelete(e){const o={id:e};W.confirm("你确定删除该行数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{p.deleteById(o).then(n=>{n.success?(d({type:"success",message:"删除成功"}),this.fetchData()):d({type:"error",message:"删除失败"})})}).catch(()=>{d({type:"warning",message:"取消删除"})})},handleEdit(e){this.dialogFormVisible=!0;const o={id:e};p.queryById(o).then(n=>{this.course=n.data.course})},toAdd(){this.dialogFormVisible=!0,this.course={}},excute(){this.course.id!=null?(p.updateById(this.course).then(e=>{e.success?(d({type:"success",message:"编辑成功"}),this.fetchData()):d({type:"error",message:"编辑失败"})}),this.dialogFormVisible=!1):p.addOne(this.course).then(e=>{e.success?(d({type:"success",message:"编辑成功"}),this.fetchData()):d({type:"error",message:"添加失败"}),this.dialogFormVisible=!1})},changeSize(e){this.limit=e,this.fetchData()}},mounted(){this.fetchData(1)}}),P={class:""},A={class:"table"},M={class:"dialog-footer"};function O(e,o,n,c,G,H){const u=L,s=U,b=T,g=I,r=F,i=v,V=k,w=z;return B(),D("div",P,[l(u,{type:"success",size:"small",onClick:e.toAdd},{default:a(()=>[m("添加")]),_:1},8,["onClick"]),h("div",A,[l(b,{data:e.tableData,style:{width:"100%"}},{default:a(()=>[l(s,{fixed:"",prop:"id",label:"编号",width:"150",align:"center"}),l(s,{prop:"name",label:"课程名称'",width:"120",align:"center"}),l(s,{prop:"nameEn",label:"英文课程名称",width:"120",align:"center"}),l(s,{prop:"courseNo",label:"课程编号",width:"120",align:"center"}),l(s,{prop:"description",label:"课程描述",width:"120",align:"center"}),l(s,{prop:"depart",label:"院学",width:"120",align:"center"}),l(s,{prop:"state",label:"状态",width:"120",align:"center"}),l(s,{prop:"major",label:"专业",width:"120",align:"center"}),l(s,{prop:"courseType",label:"课程类型",width:"120",align:"center"}),l(s,{prop:"school",label:"学校",width:"120",align:"center"}),l(s,{prop:"createTime",label:"创建时间",width:"120",align:"center"}),l(s,{prop:"updateTime",label:"更新时间",width:"120",align:"center"}),l(s,{fixed:"right",label:"操作",width:"180",align:"center"},{default:a(t=>[l(u,{size:"small",onClick:y=>e.handleEdit(t.row.id)},{default:a(()=>[m("编辑")]),_:2},1032,["onClick"]),l(u,{size:"small",type:"danger",onClick:y=>e.handleDelete(t.row.id)},{default:a(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),l(g,{"current-page":e.page,total:e.total,"page-size":e.limit,"page-sizes":[5,10,20,30,40,50,100],style:{padding:"30px 0","text-align":"center"},layout:"sizes, prev, pager, next, jumper, ->, total, slot",onCurrentChange:e.fetchData,onSizeChange:e.changeSize},null,8,["current-page","total","page-size","onCurrentChange","onSizeChange"]),l(w,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[11]||(o[11]=t=>e.dialogFormVisible=t),title:"添加/编辑"},{footer:a(()=>[h("span",M,[l(u,{onClick:o[9]||(o[9]=t=>e.dialogFormVisible=!1)},{default:a(()=>[m("取消")]),_:1}),l(u,{type:"primary",onClick:o[10]||(o[10]=t=>e.excute())},{default:a(()=>[m(" 确定 ")]),_:1})])]),default:a(()=>[l(V,{model:e.course},{default:a(()=>[l(i,{label:"课程名称","label-width":e.formLabelWidth},{default:a(()=>[l(r,{modelValue:e.course.name,"onUpdate:modelValue":o[0]||(o[0]=t=>e.course.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"英文课程名称","label-width":e.formLabelWidth},{default:a(()=>[l(r,{modelValue:e.course.nameEn,"onUpdate:modelValue":o[1]||(o[1]=t=>e.course.nameEn=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"课程编号","label-width":e.formLabelWidth},{default:a(()=>[l(r,{modelValue:e.course.courseNo,"onUpdate:modelValue":o[2]||(o[2]=t=>e.course.courseNo=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"课程描述","label-width":e.formLabelWidth},{default:a(()=>[l(r,{modelValue:e.course.description,"onUpdate:modelValue":o[3]||(o[3]=t=>e.course.description=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"院学","label-width":e.formLabelWidth},{default:a(()=>[l(r,{modelValue:e.course.depart,"onUpdate:modelValue":o[4]||(o[4]=t=>e.course.depart=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"状态","label-width":e.formLabelWidth},{default:a(()=>[l(r,{modelValue:e.course.state,"onUpdate:modelValue":o[5]||(o[5]=t=>e.course.state=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"专业","label-width":e.formLabelWidth},{default:a(()=>[l(r,{modelValue:e.course.major,"onUpdate:modelValue":o[6]||(o[6]=t=>e.course.major=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"课程类型","label-width":e.formLabelWidth},{default:a(()=>[l(r,{modelValue:e.course.courseType,"onUpdate:modelValue":o[7]||(o[7]=t=>e.course.courseType=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"学校","label-width":e.formLabelWidth},{default:a(()=>[l(r,{modelValue:e.course.school,"onUpdate:modelValue":o[8]||(o[8]=t=>e.course.school=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])])}const ue=E(S,[["render",O],["__scopeId","data-v-76cadd38"]]);export{ue as default};
