import{i as V,_ as y,d as Y,o as E,c as U,a as I,b as l,w as s,F as D,e as f}from"./index-789cd201.js";import{E as L,a as W}from"./el-form-item-0fc3dfa5.js";import{E as v}from"./el-input-26b7f203.js";import{E as M}from"./el-dialog-19ea18e4.js";import"./el-overlay-55eb4b45.js";import{E as F}from"./el-pagination-d72db8aa.js";import"./el-tag-4ea04386.js";import"./el-select-bd4a6b65.js";import{E as H,a as $}from"./el-table-column-e16de002.js";import{E as z}from"./el-button-cc310b46.js";import{g as S,a as B,b as N,e as q}from"./competitionCreateList-9f012516.js";import{d as m}from"./dayjs.min-4904ffcd.js";import{c as O}from"./cloneDeep-03746fa9.js";import{E as c}from"./index-3bbe16be.js";import"./use-form-item-f09bf200.js";import"./_Uint8Array-76672878.js";import"./_initCloneObject-f66fa92e.js";import"./debounce-c87c8148.js";import"./validator-87c37b4d.js";const T=t=>V.request({url:`api/competitionSignup/getStudentSignupCompetitionVos/${t}`,data:t}),j=t=>V.request({url:"api/student/one",params:t}),h=t=>V.request({url:"api/competitionSignup/updateBatchCheckSignupCompetitionDTO",method:"post",data:t}),A=Y({data(){return{name:"",deid:0,dialogTableVisible:!1,dialogTableVisible1:!1,competitionCreates:[],signup:[],signup1:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,competitionCreate:{},formLabelWidth:80}},mounted(){this.getall(1),this.zz(2)},methods:{upda(t){console.log(this.name),h({checked:1,ids:[t]}).then(a=>{console.log(a),this.del(this.deid)}).catch(a=>{console.log(res)})},upno(t){h({checked:2,ids:[t]}).then(a=>{console.log(a),this.del(this.deid)}).catch(a=>{console.log(res)})},upda1(t){console.log(this.name),h({checked:1,ids:[t]}).then(a=>{console.log(a),this.dell(this.deid)}).catch(a=>{console.log(res)})},upno1(t){h({checked:2,ids:[t]}).then(a=>{console.log(a),this.dell(this.deid)}).catch(a=>{console.log(res)})},zz(t){console.log(t),S({userId:t}).then(a=>{if(a.success)console.log(a.data.competitionCreates),this.competitionCreates=a.data.competitionCreates,console.log(this.competitionCreates),this.competitionCreates.forEach(e=>{e.startTime=m(e.startTime).format("YYYY年MM月DD日 HH:mm:ss"),e.endTime=m(e.endTime).format("YYYY年MM月DD日 HH:mm:ss"),e.aimCompetition==0&&(e.aimCompetition="无目标赛事"),e.checked==0?e.checked="未审核":e.checked="已审核",e.signup==0?e.signup="未开始":e.signup="已开始",e.state==0?e.state="未启用":e.state==1?e.state="启用":e.state="结束",e.aimCompetition==1275&&(e.aimCompetition="中国软件杯”大学生软件设计大赛")});else return console.log(a.msg),!1}).catch(a=>{})},toEdit(t){console.log(t),this.dialogFormVisible=!0,this.competitionCreate=O(t)},getall(t){B({colums:[],current:t,size:100,userId:2}).then(a=>{console.log(a.data.page.records);const e=a.data.page.records;this.competitions=e,this.page=e,this.competitions.forEach(n=>{n.startTime=m(n.startTime).format("YYYY年MM月DD日 HH:mm:ss"),n.endTime=m(n.endTime).format("YYYY年MM月DD日 HH:mm:ss"),n.updateTime=m(n.updateTime).format("YYYY年MM月DD日 HH:mm:ss"),n.createTime=m(n.createTime).format("YYYY年MM月DD日 HH:mm:ss"),n.aimCompetition==0&&(n.aimCompetition="无目标赛事"),n.checked==0?n.checked="未审核":n.checked="已审核",n.signup==0?n.signup="未开始":n.signup="已开始",n.state==0?n.state="未启用":n.state==1?n.state="启用":n.state="结束"})}).catch(a=>{console.log(a)})},currentchange(t){this.getall(t),this.page.current=t},getname(t){console.log(t),j({id:t}).then(a=>{if(a.success)this.name=a.data.student.studentName;else return console.log(a),!1}).catch(a=>{})},dell(t){console.log(t),T(t).then(a=>{if(a.success)this.signup1=a.data.studentSignupCompetitionVos,console.log("aa",this.signup1),this.deid=t,this.signup1=this.signup1.filter(e=>e.checked===0),this.signup1.forEach(e=>{this.getname(e.id),e.checked==0?e.checked="未审核":e.checked==1?e.checked="已同意":e.checked="已驳回",e.studentId==191?e.studentId="吴锦佩":e.studentId==267?e.studentId="张淋霞":e.studentId==374?e.studentId="吴方":e.studentId==108?e.studentId="徐龙坤":e.studentId==310?e.studentId="陈建川":e.studentId==104?e.studentId="李祖龙":e.studentId==232?e.studentId="吴桐":e.studentId==51?e.studentId="杨茜麟":e.studentId==19?e.studentId="林松辉":e.studentId==96?e.studentId="李若琳":e.studentId==310?e.studentId="陈建川":e.studentId==301?e.studentId="谢莉莎":e.studentId==91?e.studentId="李志颖":e.studentId==174?e.studentId="林昊晟":e.studentId==114?e.studentId="刘海山":e.studentId==257?e.studentId="黄伟鹏":e.studentId==194?e.studentId="王培先":e.studentId==318?e.studentId="苏瑞彬":e.studentId==433?e.studentId="戴聪":e.studentId==457?e.studentId="谢森文":e.studentId==442?e.studentId="周万钦":e.studentId==429?e.studentId="黄诗德":e.studentId==11?e.studentId="杨兴潮":e.studentId==0?e.studentId="陈维灯":e.studentId==1?e.studentId="罗佳贺":e.studentId==444?e.studentId="陈福生":e.studentId==30&&(e.studentId="赖晶晶")}),this.dialogTableVisible1=!0;else return console.log("2",a.msg),c({message:"暂无数据",type:"info"}),!1}).catch(a=>{})},del(t){console.log(t),T(t).then(a=>{if(a.success)this.signup=a.data.studentSignupCompetitionVos,console.log("aa",this.signup),this.deid=t,this.signup=this.signup.filter(e=>e.checked===2||e.checked===1),this.signup.forEach(e=>{console.log(1),this.getname(e.id),e.checked==0?e.checked="*未审核*":e.checked==1?e.checked="已同意":e.checked="已驳回",e.studentId==191?e.studentId="吴锦佩":e.studentId==267?e.studentId="张淋霞":e.studentId==374?e.studentId="吴方":e.studentId==108?e.studentId="徐龙坤":e.studentId==310?e.studentId="陈建川":e.studentId==104?e.studentId="李祖龙":e.studentId==232?e.studentId="吴桐":e.studentId==51?e.studentId="杨茜麟":e.studentId==19?e.studentId="林松辉":e.studentId==96?e.studentId="李若琳":e.studentId==310?e.studentId="陈建川":e.studentId==301?e.studentId="谢莉莎":e.studentId==91?e.studentId="李志颖":e.studentId==174?e.studentId="林昊晟":e.studentId==114?e.studentId="刘海山":e.studentId==257?e.studentId="黄伟鹏":e.studentId==194?e.studentId="王培先":e.studentId==318?e.studentId="苏瑞彬":e.studentId==433?e.studentId="戴聪":e.studentId==457?e.studentId="谢森文":e.studentId==442?e.studentId="周万钦":e.studentId==429?e.studentId="黄诗德":e.studentId==11?e.studentId="杨兴潮":e.studentId==0?e.studentId="陈维灯":e.studentId==1?e.studentId="罗佳贺":e.studentId==444?e.studentId="陈福生":e.studentId==30&&(e.studentId="赖晶晶")}),this.dialogTableVisible=!0;else return c({message:"暂无数据",type:"info"}),console.log("1",a.msg),!1}).catch(a=>{})},toAdd(){this.dialogFormVisible=!0,this.competitionCreate={aimCompetition:0,checked:0,content:"",createTime:"",deleted:0,endTime:"",id:0,schoolId:0,signup:0,startTime:"",state:0,target:"",title:"",type:"",updateTime:"",userId:0}},save(){console.log(this.competitionCreate);const t=this.competitionCreate;if(t.id==0)N(t).then(d=>{if(d.success)this.dialogFormVisible=!1,console.log(d);else return c(d.msg),!1}).catch(d=>{c("网络错误联系管理员")});else{t.checked=="未审核"?t.checked=0:t.checked=1,t.signup=="未报名"?t.signup=0:t.signup=1,t.state=="未启用"?t.state=0:t.state=="启用"?t.state=1:t.state=2,console.log(t.createTime.slice(0,4)+"-"+t.createTime.slice(5,7)+"-"+t.createTime.slice(8,10)+"T"+t.createTime.slice(12,20)+".000+08:00");let d={aimCompetition:t.aimCompetition,checked:t.checked,content:t.content,createTime:t.createTime.slice(0,4)+"-"+t.createTime.slice(5,7)+"-"+t.createTime.slice(8,10)+"T"+t.createTime.slice(12,20)+".000+08:00",deleted:t.deleted,endTime:t.endTime.slice(0,4)+"-"+t.endTime.slice(5,7)+"-"+t.endTime.slice(8,10)+"T"+t.endTime.slice(12,20)+".000+08:00",id:t.id,schoolId:t.schoolId,signup:t.signup,startTime:t.startTime.slice(0,4)+"-"+t.startTime.slice(5,7)+"-"+t.startTime.slice(8,10)+"T"+t.startTime.slice(12,20)+".000+08:00",state:t.state,target:t.target,title:t.title,type:t.type,updateTime:new Date,userId:t.userId};console.log(new Date),q(d).then(a=>{if(a.success)this.dialogFormVisible=!1,this.getall(1),c(a.msg);else return c(a.msg),!1}).catch(a=>{c("网络错误联系管理员")})}}}}),P={class:"competitionCreates",style:{width:"1150px"}},G=I("div",{style:{"margin-left":"30px","margin-top":"30px","font-size":"20px","margin-bottom":"10px"}},"竞赛审核",-1),J=I("div",{class:"competitionCreates-tools",style:{"margin-left":"89%","margin-bottom":"10px"}},null,-1),K={class:"dialog-footer"};function Q(t,d,a,e,n,R){const i=$,p=z,b=H,w=F,C=M,u=v,r=L,k=W;return E(),U(D,null,[I("div",P,[G,J,l(b,{data:t.competitionCreates,border:"",style:{width:"100%","margin-left":"20px"}},{default:s(()=>[l(i,{fixed:"",prop:"id",label:"id",width:"60",align:"center"}),l(i,{prop:"title",label:"竞赛标题",width:"100",align:"center"}),l(i,{prop:"signup",label:"开始报名",width:"90",align:"center"}),l(i,{prop:"signupedCount",label:"报名数量",width:"100",align:"center"}),l(i,{prop:"target",label:"赛事对象",width:"90",align:"center"}),l(i,{prop:"aimCompetition",label:"目标赛事",width:"150",align:"center"}),l(i,{prop:"state",label:"状态",width:"70",align:"center"}),l(i,{prop:"checked",label:"审核",width:"70",align:"center"}),l(i,{prop:"startTime",label:"竞赛开始时间",width:"135",align:"center"}),l(i,{prop:"endTime",label:"结束时间",width:"135",align:"center"}),l(i,{fixed:"right",label:"操作",width:"300",align:"center"},{default:s(o=>[l(p,{type:"success",onClick:g=>t.dell(o.row.id)},{default:s(()=>[f("报名审核")]),_:2},1032,["onClick"]),l(p,{type:"warning",onClick:g=>t.del(o.row.id)},{default:s(()=>[f("修改已审核记录")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(w,{layout:"prev, pager, next","page-size":t.page.size,total:t.page.total,onCurrentChange:t.currentchange},null,8,["page-size","total","onCurrentChange"])]),l(C,{modelValue:t.dialogTableVisible1,"onUpdate:modelValue":d[0]||(d[0]=o=>t.dialogTableVisible1=o),title:"报名审核"},{default:s(()=>[l(b,{border:"",data:t.signup1},{default:s(()=>[l(i,{property:"id",label:"id",width:"150",align:"center"}),l(i,{property:"studentId",label:"studentId",width:"200",align:"center"}),l(i,{property:"checked",label:"checked",align:"center"}),l(i,{fixed:"right",label:"操作",width:"160",align:"center"},{default:s(o=>[l(p,{type:"primary",color:"",onClick:g=>t.upda1(o.row.id)},{default:s(()=>[f("通过")]),_:2},1032,["onClick"]),l(p,{type:"danger",color:"",onClick:g=>t.upno1(o.row.id)},{default:s(()=>[f("驳回")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"]),l(C,{modelValue:t.dialogTableVisible,"onUpdate:modelValue":d[1]||(d[1]=o=>t.dialogTableVisible=o),title:"修改已审核记录"},{default:s(()=>[l(b,{border:"",data:t.signup},{default:s(()=>[l(i,{property:"id",label:"id",width:"150",align:"center"}),l(i,{property:"studentId",label:"studentId",width:"200",align:"center"}),l(i,{property:"checked",label:"checked",align:"center"}),l(i,{fixed:"right",label:"操作",width:"160",align:"center"},{default:s(o=>[l(p,{type:"primary",color:"",onClick:g=>t.upda(o.row.id)},{default:s(()=>[f("通过")]),_:2},1032,["onClick"]),l(p,{type:"danger",color:"",onClick:g=>t.upno(o.row.id)},{default:s(()=>[f("驳回")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"]),l(C,{modelValue:t.dialogFormVisible,"onUpdate:modelValue":d[19]||(d[19]=o=>t.dialogFormVisible=o),title:"竞赛"},{footer:s(()=>[I("span",K,[l(p,{onClick:d[18]||(d[18]=o=>t.dialogFormVisible=!1)},{default:s(()=>[f("Cancel")]),_:1}),l(p,{type:"primary",onClick:t.save},{default:s(()=>[f(" 保存 ")]),_:1},8,["onClick"])])]),default:s(()=>[l(k,{model:t.competitionCreate},{default:s(()=>[l(r,{label:"id","label-width":t.formLabelWidth},{default:s(()=>[l(u,{modelValue:t.competitionCreate.id,"onUpdate:modelValue":d[2]||(d[2]=o=>t.competitionCreate.id=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"竞赛标题","label-width":t.formLabelWidth},{default:s(()=>[l(u,{modelValue:t.competitionCreate.title,"onUpdate:modelValue":d[3]||(d[3]=o=>t.competitionCreate.title=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"开始报名","label-width":t.formLabelWidth},{default:s(()=>[l(u,{modelValue:t.competitionCreate.signup,"onUpdate:modelValue":d[4]||(d[4]=o=>t.competitionCreate.signup=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"赛事对象","label-width":t.formLabelWidth},{default:s(()=>[l(u,{modelValue:t.competitionCreate.target,"onUpdate:modelValue":d[5]||(d[5]=o=>t.competitionCreate.target=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"赛事类型","label-width":t.formLabelWidth},{default:s(()=>[l(u,{modelValue:t.competitionCreate.type,"onUpdate:modelValue":d[6]||(d[6]=o=>t.competitionCreate.type=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"目标赛事","label-width":t.formLabelWidth},{default:s(()=>[l(u,{modelValue:t.competitionCreate.aimCompetition,"onUpdate:modelValue":d[7]||(d[7]=o=>t.competitionCreate.aimCompetition=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"竞赛方案","label-width":t.formLabelWidth},{default:s(()=>[l(u,{modelValue:t.competitionCreate.content,"onUpdate:modelValue":d[8]||(d[8]=o=>t.competitionCreate.content=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"状态","label-width":t.formLabelWidth},{default:s(()=>[l(u,{modelValue:t.competitionCreate.state,"onUpdate:modelValue":d[9]||(d[9]=o=>t.competitionCreate.state=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"审核","label-width":t.formLabelWidth},{default:s(()=>[l(u,{modelValue:t.competitionCreate.checked,"onUpdate:modelValue":d[10]||(d[10]=o=>t.competitionCreate.checked=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"学校编号","label-width":t.formLabelWidth},{default:s(()=>[l(u,{modelValue:t.competitionCreate.schoolId,"onUpdate:modelValue":d[11]||(d[11]=o=>t.competitionCreate.schoolId=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"竞赛开始时间","label-width":t.formLabelWidth},{default:s(()=>[l(u,{modelValue:t.competitionCreate.startTime,"onUpdate:modelValue":d[12]||(d[12]=o=>t.competitionCreate.startTime=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"结束时间","label-width":t.formLabelWidth},{default:s(()=>[l(u,{modelValue:t.competitionCreate.endTime,"onUpdate:modelValue":d[13]||(d[13]=o=>t.competitionCreate.endTime=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"用户编号","label-width":t.formLabelWidth},{default:s(()=>[l(u,{modelValue:t.competitionCreate.userId,"onUpdate:modelValue":d[14]||(d[14]=o=>t.competitionCreate.userId=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"逻辑删除","label-width":t.formLabelWidth},{default:s(()=>[l(u,{modelValue:t.competitionCreate.deleted,"onUpdate:modelValue":d[15]||(d[15]=o=>t.competitionCreate.deleted=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"竞赛创建时间","label-width":t.formLabelWidth},{default:s(()=>[l(u,{modelValue:t.competitionCreate.createTime,"onUpdate:modelValue":d[16]||(d[16]=o=>t.competitionCreate.createTime=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"更新时间","label-width":t.formLabelWidth},{default:s(()=>[l(u,{modelValue:t.competitionCreate.updateTime,"onUpdate:modelValue":d[17]||(d[17]=o=>t.competitionCreate.updateTime=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const ge=y(A,[["render",Q]]);export{ge as default};
