import{_ as k,d as E,r as d,o as u,c as f,a,e as p,t as D,b as o,g as I,w as l,h as m,v as g,E as S,p as $,j as T}from"./index-789cd201.js";import{E as Y}from"./el-dialog-19ea18e4.js";import"./el-overlay-55eb4b45.js";import{E as N}from"./el-pagination-d72db8aa.js";import"./el-input-26b7f203.js";import"./el-tag-4ea04386.js";import"./el-select-bd4a6b65.js";import{E as M,a as B}from"./el-table-column-e16de002.js";import{E as H}from"./el-button-cc310b46.js";import O from"./region-d822a36b.js";import{g as F}from"./competitionCreateList-9f012516.js";import{a as J}from"./competitionSign-c2bddea0.js";import{d as _}from"./dayjs.min-4904ffcd.js";import{E as h}from"./index-3bbe16be.js";import"./use-form-item-f09bf200.js";import"./_Uint8Array-76672878.js";import"./debounce-c87c8148.js";import"./validator-87c37b4d.js";import"./_initCloneObject-f66fa92e.js";const L=E({components:{region:O},data(){return{abz:!1,listVi:!0,competitionCreates:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,competitionCreate:{},formLabelWidth:80,centerDialogVisible:!1,options:[],zz:"泉州信息工程学院",zc:JSON.parse(sessionStorage.getItem("name3"))}},mounted(){this.zzc(2),this.ab()},methods:{sign(e){J({checked:0,competitionId:e,createTime:new Date,id:0,studentId:0}).then(s=>{if(s.success)console.log(s),this.zzc(2),h({message:"报名成功",type:"success"});else return h({message:s.msg,type:"warning"}),!1}).catch(s=>{h({message:"网络错误联系管理员",type:"error"})})},mm(){const e={name2:this.zz};sessionStorage.setItem("name2",JSON.stringify(e)),console.log(e)},ab(){this.zc=JSON.parse(sessionStorage.getItem("name3")).name,this.zc=="泉州信息工程学院"||(this.listVi=!0,this.zzc(2))},zzc(e){console.log(e),F({userId:e}).then(s=>{if(s.success)console.log(s.data.competitionCreates),this.competitionCreates=s.data.competitionCreates,console.log(this.competitionCreates),this.competitionCreates.forEach(t=>{t.startTime=_(t.startTime).format("YYYY年MM月DD日 HH:mm:ss"),t.endTime=_(t.endTime).format("YYYY年MM月DD日 HH:mm:ss"),t.aimCompetition==0&&(t.aimCompetition="无目标赛事"),t.checked==0?t.checked="未审核":t.checked="已审核",t.signup==0?t.signup="未开始":t.signup="已开始",t.state==0?t.state="未启用":t.state==1?t.state="启用":t.state="结束",t.aimCompetition==1275&&(t.aimCompetition="中国软件杯”大学生软件设计大赛")});else return console.log(s.msg),!1}).catch(s=>{})}}}),j=e=>($("data-v-795ec302"),e=e(),T(),e),G={class:"aside_header"},P={key:0,class:"aside_header_back",style:{cursor:"pointer"}},U={style:{color:"#808080","font-size":"13px",display:"inline-block"}},W={style:{cursor:"pointer"}},q={class:"bar"},x=j(()=>a("div",{style:{float:"left","line-height":"45px","margin-left":"20px"}}," 竞赛列表 ",-1)),A={style:{float:"right","line-height":"45px","margin-right":"20px"}},K={class:"competitionCreates",style:{width:"70%",display:"block",margin:"0 auto"}},Q={class:"img"},R={style:{"margin-left":"50px"}},X={class:"dialog-footer"};function Z(e,i,s,t,ee,te){const b=d("LocationFilled"),C=d("Grid"),y=S,n=B,c=H,v=M,z=N,w=d("region"),V=Y;return u(),f("div",null,[a("div",G,[e.abz?(u(),f("div",P,[a("div",{style:{display:"inline-block","margin-right":"30px","margin-top":"5px"},onClick:i[0]||(i[0]=r=>(this.$router.push("/admin"),e.mm()))}),a("div",U,[p(D(e.zz)+" ",1),a("a",W,[o(b,{style:{width:"1em",height:"1em"},onClick:i[1]||(i[1]=r=>e.centerDialogVisible=!0)})])])])):I("",!0)]),a("div",q,[x,a("div",A,[o(y,null,{default:l(()=>[o(C)]),_:1})])]),a("div",K,[m(o(v,{data:e.competitionCreates,border:"",style:{width:"100%"}},{default:l(()=>[o(n,{fixed:"",prop:"id",label:"id",width:"60",align:"center"}),o(n,{prop:"title",label:"竞赛标题",width:"100",align:"center"}),o(n,{prop:"signupedCount",label:"报名数量",width:"100",align:"center"}),o(n,{prop:"target",label:"赛事对象",width:"90",align:"center"}),o(n,{prop:"aimCompetition",label:"目标赛事",width:"150",align:"center"}),o(n,{prop:"signup",label:"开始报名",width:"90",align:"center"}),o(n,{prop:"startTime",label:"竞赛开始时间",width:"135",align:"center"}),o(n,{prop:"endTime",label:"结束时间",width:"135",align:"center"}),o(n,{fixed:"right",label:"操作",width:"130",align:"center"},{default:l(r=>[o(c,{type:"primary",onClick:oe=>e.sign(r.row.id)},{default:l(()=>[p("报名该竞赛")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),[[g,e.listVi]]),m(o(z,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"]),[[g,e.listVi]]),m(a("div",Q,null,512),[[g,!e.listVi]])]),o(V,{modelValue:e.centerDialogVisible,"onUpdate:modelValue":i[4]||(i[4]=r=>e.centerDialogVisible=r),title:"学校选择",width:"50%","align-center":""},{footer:l(()=>[a("span",X,[o(c,{onClick:i[2]||(i[2]=r=>e.centerDialogVisible=!1)},{default:l(()=>[p("取消")]),_:1}),o(c,{type:"primary",onClick:i[3]||(i[3]=r=>(e.centerDialogVisible=!1,e.ab()))},{default:l(()=>[p(" 确定 ")]),_:1})])]),default:l(()=>[a("div",R,[o(w)])]),_:1},8,["modelValue"])])}const ze=k(L,[["render",Z],["__scopeId","data-v-795ec302"]]);export{ze as default};
