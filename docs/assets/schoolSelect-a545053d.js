import{_ as V,d as E,o as n,c as r,b as a,w as i,F as m,X as p,f as u}from"./index-789cd201.js";import{E as N}from"./el-button-cc310b46.js";import{E as v}from"./el-input-26b7f203.js";import"./el-tag-4ea04386.js";import{E as F,a as w}from"./el-select-bd4a6b65.js";import{E as B,a as D}from"./el-table-column-e16de002.js";import{s as t}from"./school-bbc040a4.js";/* empty css                   */import"./el-overlay-55eb4b45.js";import{E as s}from"./index-3bbe16be.js";import{E as f}from"./index-c9eff66b.js";import"./use-form-item-f09bf200.js";import"./_Uint8Array-76672878.js";import"./debounce-c87c8148.js";import"./validator-87c37b4d.js";import"./_initCloneObject-f66fa92e.js";const k=E({data(){return{list:[],school:{},schoolz:[],cityc:{city:"泉州市",county:"丰泽区",province:"福建省"},dialogFormVisible:!1,queryForm:{id:""},dialogFormVisible:!1,dialogData:{}}},mounted(){this.fetchData()},methods:{search(){t.getSchoolsByRegion(this.cityc).then(e=>{e.success?(console.log(e.data.schools),this.schoolz=e.data.schools,s({type:"success",message:"编辑成功"})):(console.log(e),s({type:"error",message:"网络出问题，联系管理员"}))})},fetchData(){t.all().then(e=>{console.log(e),this.list=e.data.schools})},handleQuery(){const e={id:this.queryForm.id};t.one(e).then(o=>{console.log(o),this.dialogData=o.data.school,this.dialogVisible=!0}).catch(o=>{f.alert("查询失败，请重试","错误",{confirmButtonText:"确定",type:"error"}),console.error(o)})},handleDelete(e){const o={id:e};f.confirm("您是否需要删除该学校?","提示",{confirmButtonText:"ok",cancelButtonText:"no",type:"warning"}).then(()=>{t.remove(o).then(c=>{c.success?(s({type:"success",message:"删除成功"}),this.fetchData()):s({type:"error",message:"网络出问题，联系管理员"})})}).catch(()=>{s({type:"warning",message:"取消删除"})})},handleEdit(e){this.dialogFormVisible=!0;const o={id:e};t.one(o).then(c=>{this.school=c.data.school})},toAdd(){this.school={},this.dialogFormVisible=!0},confirm(){this.school.id==null?t.add(this.school).then(e=>{e.success?(s({type:"success",message:"添加成功"}),this.fetchData()):s({type:"error",message:"网络出问题，联系管理员"}),this.dialogFormVisible=!1}):(t.update(this.school).then(e=>{e.success?(s({type:"success",message:"编辑成功"}),this.fetchData()):s({type:"error",message:"网络出问题，联系管理员"})}),this.dialogFormVisible=!1)}}});function C(e,o,c,z,$,S){const g=D,y=B,d=w,h=F,_=v,b=N;return n(),r(m,null,[a(y,{data:e.schoolz,style:{width:"100%"}},{default:i(()=>[a(g,{fixed:"",prop:"schoolName",label:"id",width:"80",align:"center"})]),_:1},8,["data"]),a(h,{modelValue:e.schoolName,"onUpdate:modelValue":o[0]||(o[0]=l=>e.schoolName=l),class:"m-2",placeholder:"Select",size:"large"},{default:i(()=>[(n(!0),r(m,null,p(e.schoolz,l=>(n(),u(d,{key:l.schoolName,label:l.schoolName,value:l.schoolName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a(h,{onChange:o[1]||(o[1]=l=>e.$forceUpdate()),modelValue:e.schoolName,"onUpdate:modelValue":o[2]||(o[2]=l=>e.schoolName=l),class:"m-2",placeholder:"请选择省|直辖市",style:{"margin-left":"10px",width:"150px"}},{default:i(()=>[(n(!0),r(m,null,p(e.schoolz,l=>(n(),u(d,{label:l.schoolName,key:l.schoolName,value:l.schoolName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a(_,{modelValue:e.searchKeyword,"onUpdate:modelValue":o[3]||(o[3]=l=>e.searchKeyword=l),placeholder:"请输入关键词",clearable:"",onClear:e.search},null,8,["modelValue","onClear"]),a(b,{slot:"append",icon:"el-icon-search",onClick:e.search},null,8,["onClick"])],64)}const J=V(k,[["render",C],["__scopeId","data-v-1d4f5aab"]]);export{J as default};
