import{i as b,ab as S,C as p,K as j,o as q,c as P,h as _,v as N,a as f,b as l,w as o,M as C,e as c}from"./index-789cd201.js";import{E as A}from"./el-dialog-19ea18e4.js";import"./el-overlay-55eb4b45.js";import{E as K,a as G}from"./el-form-item-0fc3dfa5.js";import{E as J}from"./el-input-26b7f203.js";import{E as Q}from"./el-pagination-d72db8aa.js";import"./el-tag-4ea04386.js";import"./el-select-bd4a6b65.js";import{E as R,a as X}from"./el-table-column-e16de002.js";import{E as Z}from"./el-button-cc310b46.js";import{d as D}from"./dayjs.min-4904ffcd.js";import"./use-form-item-f09bf200.js";import"./_Uint8Array-76672878.js";import"./_initCloneObject-f66fa92e.js";import"./debounce-c87c8148.js";import"./validator-87c37b4d.js";function ee(u){return b({url:"api/mobile/elogin",method:"post",data:u})}function le(){return b({url:"/api/teacher/all",method:"get"})}function ae(u){return b({url:`/api/teacher/one?id=${u}`,method:"get"})}function te(u){return b({url:`/api/teacher/delete?id=${u}`,method:"get"})}function oe(u){return b({url:"/api/teacher/add",method:"post",data:u})}function ne(u){return b({url:"/api/teacher/edit",method:"post",data:u})}const de={class:"aaa"},re=f("div",{style:{"margin-left":"30px","margin-top":"30px","font-size":"20px"}},"教师信息管理",-1),ue=f("br",null,null,-1),ie=f("br",null,null,-1),se={class:"dialog-footer"},me={class:"dialog-footer"},Ue={__name:"teacher",setup(u){const L=S(),h=p(!1),g=p(!1),w=p(!1),W=p({email:"116964635@qq.com",password:"12345678"});j(()=>{console.log("111")});const V=p([]);let y=p(10),T=p(1);const d=p({createTime:"",depart:"",id:0,professional:"",school:"",teacherName:"",teacherNo:"",updateTime:"",userId:2}),n=p({}),E=()=>{let t=W.value;ee(t).then(e=>{if(e.code==1){let r=e.data.userinfo.token;L.setToken(r),h.value=!0,v()}else alert("登录失败，请检查账号或密码输入是否有误。")})};function $(t){T=t,v()}function z(t){y=t,v()}const Y=()=>{let t={createTime:new Date,depart:d.value.depart,id:0,professional:d.value.professional,school:d.value.school,teacherName:d.value.teacherName,teacherNo:d.value.teacherNo,updateTime:new Date,userId:2};oe(t).then(e=>{e.code==1&&(alert("添加教师信息成功！"),v())})},x=t=>{ae(t).then(e=>{let r=e.data.teacher;n.value=r,console.log(r)})},I=()=>{if(confirm("是否要进行更新？"))if(n.value.id=="")alert("请选择要操作的教师信息。");else{let t={createTime:n.value.createTime,depart:n.value.depart,id:n.value.id,professional:n.value.professional,school:n.value.school,teacherName:n.value.teacherName,teacherNo:n.value.teacherNo,updateTime:new Date,userId:2};ne(t).then(e=>{e.code==1&&(alert("更新成功。"),M(),v())})}},M=()=>{n.value={createTime:"",depart:"",id:"",professiona:" ",school:"",teacherName:"",teacherNo:"",updateTime:"",userId:""}},O=t=>{console.log(t),confirm("是否要删除该教师信息？")&&te(t).then(e=>{e.code==1&&(alert("成功删除教师信息！"),v())})};function v(){le().then(t=>{console.log(t),V.value=t.data.teachers,console.log(V.value),V.value.forEach(e=>{e.createTime=D(e.createTime).format("YYYY年MM月DD日 HH:mm:ss"),e.updateTime=D(e.updateTime).format("YYYY年MM月DD日 HH:mm:ss")})})}return(t,e)=>{const r=Z,m=X,F=R,B=Q,i=J,s=K,k=G,U=A;return q(),P("div",null,[_(f("div",de,[_(l(r,{type:"primary",color:"",onClick:e[0]||(e[0]=a=>E()),style:{"margin-left":"40%","margin-top":"20%","font-size":"20px",height:"80px",width:"180px"}},{default:o(()=>[c("获取最新教师信息")]),_:1},512),[[N,h.value==!1]])],512),[[N,h.value==!1]]),_(f("div",null,[re,_(l(r,{type:"success",color:"",onClick:e[1]||(e[1]=a=>g.value=!0),style:{"margin-left":"89%",width:"80px"}},{default:o(()=>[c("添加")]),_:1},512),[[N,h.value]])],512),[[N,h.value]]),ue,_(f("div",null,[f("div",null,[l(F,{data:V.value.slice((C(T)-1)*C(y),C(T)*C(y)),border:"",style:{width:"100%","margin-left":"20px"}},{default:o(()=>[l(m,{fixed:"",prop:"id",label:"id",width:"80",align:"center"}),l(m,{prop:"school",label:"学校",width:"170",align:"center"}),l(m,{prop:"depart",label:"所属学院",width:"90",align:"center"}),l(m,{prop:"teacherNo",label:"工号",width:"120",align:"center"}),l(m,{prop:"teacherName",label:"教师姓名",width:"120",align:"center"}),l(m,{prop:"professional",label:"教师职称",width:"120",align:"center"}),l(m,{prop:"createTime",label:"创建时间",width:"140",align:"center"}),l(m,{prop:"updateTime",label:"更新时间",width:"140",align:"center"}),l(m,{fixed:"right",label:"操作",width:"160",align:"center"},{default:o(a=>[l(r,{type:"primary",color:"",onClick:H=>(w.value=!0,x(a.row.id))},{default:o(()=>[c("更新")]),_:2},1032,["onClick"]),l(r,{type:"danger",color:"",onClick:H=>O(a.row.id)},{default:o(()=>[c("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(B,{background:"",layout:"prev, pager, next, sizes, total, jumper","page-sizes":[5,10,15,20],"page-size":C(y),total:V.value.length,onCurrentChange:$,onSizeChange:z},null,8,["page-size","total"])]),ie],512),[[N,h.value]]),l(U,{modelValue:g.value,"onUpdate:modelValue":e[9]||(e[9]=a=>g.value=a),title:"添加/更改"},{footer:o(()=>[f("span",se,[l(r,{onClick:e[7]||(e[7]=a=>g.value=!1)},{default:o(()=>[c("Cancel")]),_:1}),l(r,{type:"primary",onClick:e[8]||(e[8]=a=>(g.value=!1,Y()))},{default:o(()=>[c(" 保存 ")]),_:1})])]),default:o(()=>[l(k,{model:d.value},{default:o(()=>[l(s,{label:"学校","label-width":t.formLabelWidth},{default:o(()=>[l(i,{modelValue:d.value.school,"onUpdate:modelValue":e[2]||(e[2]=a=>d.value.school=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(s,{label:"所属学院","label-width":t.formLabelWidth},{default:o(()=>[l(i,{modelValue:d.value.depart,"onUpdate:modelValue":e[3]||(e[3]=a=>d.value.depart=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(s,{label:"工号","label-width":t.formLabelWidth},{default:o(()=>[l(i,{modelValue:d.value.teacherNo,"onUpdate:modelValue":e[4]||(e[4]=a=>d.value.teacherNo=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(s,{label:"教师姓名","label-width":t.formLabelWidth},{default:o(()=>[l(i,{modelValue:d.value.teacherName,"onUpdate:modelValue":e[5]||(e[5]=a=>d.value.teacherName=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(s,{label:"教师职称","label-width":t.formLabelWidth},{default:o(()=>[l(i,{modelValue:d.value.professional,"onUpdate:modelValue":e[6]||(e[6]=a=>d.value.professional=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(U,{modelValue:w.value,"onUpdate:modelValue":e[17]||(e[17]=a=>w.value=a),title:"添加/更改"},{footer:o(()=>[f("span",me,[l(r,{onClick:e[15]||(e[15]=a=>w.value=!1)},{default:o(()=>[c("Cancel")]),_:1}),l(r,{type:"primary",onClick:e[16]||(e[16]=a=>(w.value=!1,I()))},{default:o(()=>[c(" 保存 ")]),_:1})])]),default:o(()=>[l(k,{model:d.value},{default:o(()=>[l(s,{label:"学校","label-width":t.formLabelWidth},{default:o(()=>[l(i,{modelValue:n.value.school,"onUpdate:modelValue":e[10]||(e[10]=a=>n.value.school=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(s,{label:"所属学院","label-width":t.formLabelWidth},{default:o(()=>[l(i,{modelValue:n.value.depart,"onUpdate:modelValue":e[11]||(e[11]=a=>n.value.depart=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(s,{label:"工号","label-width":t.formLabelWidth},{default:o(()=>[l(i,{modelValue:n.value.teacherNo,"onUpdate:modelValue":e[12]||(e[12]=a=>n.value.teacherNo=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(s,{label:"教师姓名","label-width":t.formLabelWidth},{default:o(()=>[l(i,{modelValue:n.value.teacherName,"onUpdate:modelValue":e[13]||(e[13]=a=>n.value.teacherName=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(s,{label:"教师职称","label-width":t.formLabelWidth},{default:o(()=>[l(i,{modelValue:n.value.professional,"onUpdate:modelValue":e[14]||(e[14]=a=>n.value.professional=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{Ue as default};
