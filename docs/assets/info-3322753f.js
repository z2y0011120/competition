import{_ as c,d as w,o as T,c as C,a as f,b as l,w as i,e as u,p as E,j as I}from"./index-789cd201.js";import{E as L}from"./el-dialog-19ea18e4.js";import"./el-overlay-55eb4b45.js";import{E as U,a as W}from"./el-form-item-0fc3dfa5.js";import{E as k}from"./el-input-26b7f203.js";import{E as y,a as v}from"./el-table-column-e16de002.js";import"./el-tag-4ea04386.js";import{E as z}from"./el-button-cc310b46.js";import{g as F,a as D,d as $,b as B,e as N}from"./competitionCreateList-9f012516.js";import{c as S}from"./cloneDeep-03746fa9.js";import{E as p}from"./index-3bbe16be.js";import"./use-form-item-f09bf200.js";import"./_Uint8Array-76672878.js";import"./_initCloneObject-f66fa92e.js";import"./debounce-c87c8148.js";const A=w({data(){return{competitionCreates:[],competitions:[],page:{colums:[],current:1,schoolId:0,size:50},dialogFormVisible:!1,competition:{aimCompetition:0,checked:0,content:"",createTime:"2022-10-30T16:00:00.000+00:00",deleted:0,endTime:"2022-10-30T16:00:00.000+00:00",id:0,schoolId:1,signup:0,startTime:"2022-10-30T16:00:00.000+00:00",state:0,target:"",title:"",type:"",updateTime:"2022-10-30T16:00:00.000+00:00",userId:0},formLabelWidth:80}},mounted(){this.getall(1),this.newDate(),this.zz(0)},methods:{zz(e){console.log(e),F({userId:e}).then(m=>{if(m.success)console.log(m.data.competitionCreates),this.competitionCreates=m.data.competitionCreates;else return console.log(m.msg),!1}).catch(m=>{})},newDate(){console.log(new Date)},toEdit(e){console.log(e),this.dialogFormVisible=!0,this.competition=S(e)},getall(e){D({current:e,size:50}).then(m=>{console.log(m);const r=m.data.competitions;this.competitions=r,this.page=r}).catch(m=>{console.log(m)})},currentchange(e){this.getall(e),this.page.current=e},del(e){console.log(e),$({id:e}).then(m=>{if(m.success)this.getall(this.page.current),this.zz(0);else return console.log(m.msg),!1}).catch(m=>{})},toAdd(){this.dialogFormVisible=!0,this.competition={aimCompetition:0,checked:0,content:"",createTime:"2022-10-30T16:00:00.000+00:00",deleted:0,endTime:"2022-10-30T16:00:00.000+00:00",id:0,schoolId:1,signup:0,startTime:"2022-10-30T16:00:00.000+00:00",state:0,target:"",title:"",type:"",updateTime:"2022-10-30T16:00:00.000+00:00",userId:0}},save(){console.log(this.competition);const e=this.competition;e.id==0?B(e).then(o=>{if(o.success)this.getall(this.page.current),this.dialogFormVisible=!1,this.zz(0),p(o.msg);else return p(o.msg),!1}).catch(o=>{p("网络错误联系管理员")}):N(e).then(o=>{if(o.success)this.dialogFormVisible=!1,this.getall(this.page.current),this.zz(0),p(o.msg);else return p(o.msg),!1}).catch(o=>{p("网络错误联系管理员")})}}}),j=e=>(E("data-v-8e9efe2b"),e=e(),I(),e),M={class:"main"},O=j(()=>f("div",{class:"title"},"竞赛创建",-1)),q={class:"leave_btn"},G={class:"dialog-footer"};function H(e,o,m,r,J,K){const s=z,n=v,b=y,a=k,d=U,h=W,V=L;return T(),C("div",M,[O,f("div",q,[l(s,{type:"primary",size:"large",icon:"Edit",onClick:e.toAdd},{default:i(()=>[u("创建竞赛")]),_:1},8,["onClick"])]),l(b,{data:e.competitionCreates,border:"",style:{width:"100%","margin-left":"20px"}},{default:i(()=>[l(n,{fixed:"",prop:"id",label:"id",width:"100"}),l(n,{prop:"title",label:"竞赛标题",width:"170"}),l(n,{prop:"startTime",label:"竞赛开始时间",width:"120"}),l(n,{prop:"endTime",label:"结束时间",width:"120"}),l(n,{prop:"signup",label:"开始报名",width:"120"}),l(n,{prop:"target",label:"赛事对象",width:"120"}),l(n,{prop:"aimCompetition",label:"目标赛事",width:"120"}),l(n,{prop:"state",label:"状态",width:"120"}),l(n,{prop:"checked",label:"审核",width:"120"}),l(n,{prop:"schoolId",label:"学校编号",width:"120"}),l(n,{prop:"signupedCount",label:"报名数量",width:"120"}),l(n,{fixed:"right",label:"操作",width:"160"},{default:i(t=>[l(s,{type:"primary",onClick:g=>e.toEdit(t.row)},{default:i(()=>[u("更新")]),_:2},1032,["onClick"]),l(s,{type:"danger",onClick:g=>e.del(t.row.id)},{default:i(()=>[u("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(V,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[17]||(o[17]=t=>e.dialogFormVisible=t),title:"竞赛"},{footer:i(()=>[f("span",G,[l(s,{onClick:o[16]||(o[16]=t=>e.dialogFormVisible=!1)},{default:i(()=>[u("Cancel")]),_:1}),l(s,{type:"primary",onClick:e.save},{default:i(()=>[u(" 保存 ")]),_:1},8,["onClick"])])]),default:i(()=>[l(h,{model:e.competition},{default:i(()=>[l(d,{label:"目标赛事","label-width":e.formLabelWidth},{default:i(()=>[l(a,{modelValue:e.competition.aimCompetition,"onUpdate:modelValue":o[0]||(o[0]=t=>e.competition.aimCompetition=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"审核","label-width":e.formLabelWidth},{default:i(()=>[l(a,{modelValue:e.competition.checked,"onUpdate:modelValue":o[1]||(o[1]=t=>e.competition.checked=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"竞赛方案","label-width":e.formLabelWidth},{default:i(()=>[l(a,{modelValue:e.competition.content,"onUpdate:modelValue":o[2]||(o[2]=t=>e.competition.content=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"创建时间","label-width":e.formLabelWidth},{default:i(()=>[l(a,{modelValue:e.competition.createTime,"onUpdate:modelValue":o[3]||(o[3]=t=>e.competition.createTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"逻辑删除","label-width":e.formLabelWidth},{default:i(()=>[l(a,{modelValue:e.competition.deleted,"onUpdate:modelValue":o[4]||(o[4]=t=>e.competition.deleted=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"结束时间","label-width":e.formLabelWidth},{default:i(()=>[l(a,{modelValue:e.competition.endTime,"onUpdate:modelValue":o[5]||(o[5]=t=>e.competition.endTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"id","label-width":e.formLabelWidth},{default:i(()=>[l(a,{modelValue:e.competition.id,"onUpdate:modelValue":o[6]||(o[6]=t=>e.competition.id=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"学校编号","label-width":e.formLabelWidth},{default:i(()=>[l(a,{modelValue:e.competition.schoolId,"onUpdate:modelValue":o[7]||(o[7]=t=>e.competition.schoolId=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"开始报名","label-width":e.formLabelWidth},{default:i(()=>[l(a,{modelValue:e.competition.signup,"onUpdate:modelValue":o[8]||(o[8]=t=>e.competition.signup=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"竞赛开始时间","label-width":e.formLabelWidth},{default:i(()=>[l(a,{modelValue:e.competition.startTime,"onUpdate:modelValue":o[9]||(o[9]=t=>e.competition.startTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"状态","label-width":e.formLabelWidth},{default:i(()=>[l(a,{modelValue:e.competition.state,"onUpdate:modelValue":o[10]||(o[10]=t=>e.competition.state=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"赛事对象","label-width":e.formLabelWidth},{default:i(()=>[l(a,{modelValue:e.competition.target,"onUpdate:modelValue":o[11]||(o[11]=t=>e.competition.target=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"赛事标题","label-width":e.formLabelWidth},{default:i(()=>[l(a,{modelValue:e.competition.title,"onUpdate:modelValue":o[12]||(o[12]=t=>e.competition.title=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"赛事类型","label-width":e.formLabelWidth},{default:i(()=>[l(a,{modelValue:e.competition.type,"onUpdate:modelValue":o[13]||(o[13]=t=>e.competition.type=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"更新时间","label-width":e.formLabelWidth},{default:i(()=>[l(a,{modelValue:e.competition.updateTime,"onUpdate:modelValue":o[14]||(o[14]=t=>e.competition.updateTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"用户编号","label-width":e.formLabelWidth},{default:i(()=>[l(a,{modelValue:e.competition.userId,"onUpdate:modelValue":o[15]||(o[15]=t=>e.competition.userId=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])])}const me=c(A,[["render",H],["__scopeId","data-v-8e9efe2b"]]);export{me as default};
